# Firebase Configuration (OBRIGATÓRIO)
GOOGLE_APPLICATION_CREDENTIALS=src/smart_core_assistant_painel/modules/initial_loading/utils/keys/firebase_config/firebase_key.json

# Django Configuration (OBRIGATÓRIO)
SECRET_KEY_DJANGO=sua-chave-secreta-django-aqui
DJANGO_DEBUG=True
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0
DJANGO_SETTINGS_MODULE=smart_core_assistant_painel.app.ui.core.settings

# Evolution API Configuration (OBRIGATÓRIO)
EVOLUTION_API_URL=http://192.168.3.127:8080
EVOLUTION_API_KEY=sua-chave-evolution-api-aqui
EVOLUTION_API_GLOBAL_WEBHOOK_URL=http://localhost:8000/oraculo/webhook_whatsapp/

# Evolution API QR Code Configuration (Correções Implementadas)
EVOLUTION_API_QRCODE_LIMIT=30
EVOLUTION_API_QRCODE_COLOR=#198754

# Redis Configuration para Evolution API Cache (Correções Implementadas)
CACHE_REDIS_ENABLED=true
CACHE_REDIS_URI=redis://redis:6379/6
CACHE_REDIS_TTL=604800
CACHE_REDIS_PREFIX_KEY=evolution
CACHE_REDIS_SAVE_INSTANCES=false

# Redis Configuration (Django Q Cluster)
REDIS_HOST=192.168.3.127
REDIS_PORT=6379

# PostgreSQL Configuration - Django
POSTGRES_DB=smart_core_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres123
POSTGRES_HOST=192.168.3.127
POSTGRES_PORT=5432

# PostgreSQL Configuration - Evolution API
EVOLUTION_POSTGRES_DB=evolution
EVOLUTION_POSTGRES_USER=evolution
EVOLUTION_POSTGRES_PASSWORD=evolution123

# Webhook Configuration (com tratamento UTF-8 robusto)
WEBHOOK_URL=http://localhost:8000/oraculo/webhook_whatsapp/
WEBHOOK_SECRET=seu-webhook-secret
WEBHOOK_GLOBAL_URL=http://django-app:8000/oraculo/webhook_whatsapp/
WEBHOOK_GLOBAL_ENABLED=true
WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=false

# Database Configuration para Evolution API
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI=postgresql://evolution:evolution123@postgres:5432/evolution?schema=public
DATABASE_CONNECTION_CLIENT_NAME=evolution_exchange
DATABASE_SAVE_DATA_INSTANCE=true
DATABASE_SAVE_DATA_NEW_MESSAGE=true
DATABASE_SAVE_MESSAGE_UPDATE=true
DATABASE_SAVE_DATA_CONTACTS=true
DATABASE_SAVE_DATA_CHATS=true
DATABASE_SAVE_DATA_LABELS=true
DATABASE_SAVE_DATA_HISTORIC=true

# Server Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
WORKERS=4
SERVER_TYPE=http
SERVER_URL=http://localhost:8080

# Security
SECURE_SSL_REDIRECT=False
SESSION_COOKIE_SECURE=False
CSRF_COOKIE_SECURE=False

# Logging
LOG_LEVEL=INFO
LOG_COLOR=true
LOG_BAILEYS=error

# Ollama Configuration (ambiente_chat via localhost)
# O Ollama roda no ambiente separado "ambiente_chat" e é acessado via localhost
OLLAMA_HOST=localhost
OLLAMA_PORT=11434
OLLAMA_BASE_URL=http://localhost:11434

# Evolution API Session Configuration
CONFIG_SESSION_PHONE_VERSION=2.3000.1023204200

# Variáveis carregadas dinamicamente do Firebase Remote Config:
# - OPENAI_API_KEY: Chave da API OpenAI
# - GROQ_API_KEY: Chave da API Groq
# - WHATSAPP_API_BASE_URL: URL base da API WhatsApp
# - WHATSAPP_API_SEND_TEXT_URL: URL para envio de texto
# - WHATSAPP_API_START_TYPING_URL: URL para iniciar digitação
# - WHATSAPP_API_STOP_TYPING_URL: URL para parar digitação
# - LLM_CLASS: Classe do modelo de linguagem
# - MODEL: Modelo específico a ser usado
# - LLM_TEMPERATURE: Temperatura para geração de texto
# - PROMPT_SYSTEM_ANALISE_CONTEUDO
# - PROMPT_HUMAN_ANALISE_CONTEUDO
# - PROMPT_SYSTEM_MELHORIA_CONTEUDO
# - CHUNK_OVERLAP
# - CHUNK_SIZE
# - EMBEDDINGS_MODEL
# - PROMPT_HUMAN_ANALISE_PREVIA_MENSAGEM
# - PROMPT_SYSTEM_ANALISE_PREVIA_MENSAGEM
# - VALID_ENTITY_TYPES
# - VALID_INTENT_TYPES

# CORREÇÕES IMPLEMENTADAS:
# 1. Webhook WhatsApp com tratamento robusto de encoding (UTF-8, Latin-1, CP1252)
# 2. Validação de dados JSON para prevenir erro 'str' object has no attribute 'get'
# 3. QR Code da Evolution API otimizado (30s limite, cor personalizada)
# 4. Cache Redis configurado para melhor performance
# 5. Logging detalhado para troubleshooting
# 6. Configurações alinhadas com docker-compose.yml (serviços: postgres-django, redis-django)
# 7. Variáveis de ambiente organizadas por categoria

# Embeddings / Vector Store (PGVector + HNSW)
# Classe e modelo de embeddings. Para usar Ollama:
# - EMBEDDINGS_CLASS=OllamaEmbeddings
# - EMBEDDINGS_MODEL=mxbai-embed-large:latest
# - OLLAMA_BASE_URL deve apontar para a instância do Ollama
EMBEDDINGS_CLASS=OllamaEmbeddings
EMBEDDINGS_MODEL=mxbai-embed-large:latest
# Nome da coleção no PGVector; altere se trocar a dimensão do embedding
# Ex.: treinamentos_mxbai_embed_large para 1024 dims do mxbai-embed-large
VECTOR_COLLECTION_NAME=treinamentos

# Parâmetros do índice HNSW (pgvector)
# Valores padrão seguros; ajuste conforme necessidade de recall/latência
HNSW_M=16
HNSW_EF_CONSTRUCTION=64
HNSW_EF_SEARCH=40